<Window x:Class="PdfToolkitApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PDF Merger" Height="400" Width="500"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip">

    <Border Background="{DynamicResource AppBackground}"
            CornerRadius="8"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="0.3"
            SnapsToDevicePixels="True">

        <Grid>
            <!-- Layout: Title Bar + Content -->
            <Grid.RowDefinitions>
                <RowDefinition Height="20.7"/>
                <RowDefinition Height="19.3"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- 🔹 Custom Title Bar -->

            <DockPanel Background="{DynamicResource TitleBarBackground}"
                      MouseLeftButtonDown="Window_MouseLeftButtonDown" Grid.RowSpan="2">

                <StackPanel Orientation="Horizontal"
                           HorizontalAlignment="Right"
                           DockPanel.Dock="Right">
                    <Button Content="−" Click="Minimize_Click"
                           Style="{StaticResource TitleBarButtonStyle}"/>
                    <Button Content="×" Click="Close_Click"
                           Style="{StaticResource TitleBarButtonStyle}"/>
                </StackPanel>
                <TextBlock Text="    PDF ToolKit"
                          Foreground="{DynamicResource TitleText}"
                          FontSize="12" DockPanel.Dock="Bottom" Height="16" />
            </DockPanel>


            <!-- 🔹 Main Content -->
            <StackPanel Grid.Row="2" Margin="30,0,30,0" VerticalAlignment="Center">

                <!-- 📁 Select Files -->
                <Button Content="Select PDF Files" Click="SelectFiles_Click" Margin="0 0 0 10"/>

                <!-- 📄 List of Selected PDFs -->
                <ListBox x:Name="PdfListBox"
                         Height="150"
                         Margin="0 0 0 10"
                         ItemsSource="{Binding PdfFiles}"
                         AllowDrop="True"
                         PreviewMouseLeftButtonDown="PdfListBox_PreviewMouseLeftButtonDown"
                         PreviewMouseMove="PdfListBox_PreviewMouseMove"
                         Drop="PdfListBox_DropForReorder"
                         DragOver="PdfListBox_DragOver">

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <Button Grid.Column="0" Content="↑" Width="25" Margin="2"
                                     Click="MoveItemUp_Click" Tag="{Binding}"/>
                                <Button Grid.Column="1" Content="↓" Width="25" Margin="2"
                                     Click="MoveItemDown_Click" Tag="{Binding}"/>
                                <Button Grid.Column="2" Content="🗑" Width="25" Margin="2"
                                     Click="RemoveItem_Click" Tag="{Binding}"/>
                                <TextBlock Grid.Column="3" Text="{Binding}"                                           
                                     VerticalAlignment="Center"
                                     Margin="8 0" TextTrimming="CharacterEllipsis"/>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>

                </ListBox>
                <!-- ✅ Merge Button -->
                <Button Content="Merge and Save" Click="MergeFiles_Click"/>
            </StackPanel>

        </Grid>
    </Border>
</Window>
